.. Set the default domain and role, for limiting the markup overhead.
.. default-domain:: py
.. default-role:: any

.. _lapptrack-userguide_report-ini-content:

report.ini
==========
.. sectionauthor:: Frédéric MEZOU <frederic.mezou@free.fr>

This file contains the configuration of report generated by the :doc:`lapptrack`
script. It use a structure similar to what’s found in Microsoft Windows INI
files, and parse with the `configparser` module of the Python standard library.
See the 'Supported INI File Structure' section to have details about the file
format.

The configuration consists of two main sections and one section per
handler (send a mail, write in a file, write in a stream) such as below.

* :ref:`lapptrack-userguide_report-ini-core-section` contains configuration
  items for the report processor

* :ref:`lapptrack-userguide_report-ini-attributes-section` contains contains
  named keyword used in the template report

* :ref:`lapptrack-userguide_report-ini-mailhandler-section` contains
  configuration items to send the activity report in a mail

* :ref:`lapptrack-userguide_report-ini-filehandler-section` contains
  configuration items to write the activity report in a file

* :ref:`lapptrack-userguide_report-ini-streamhandler-section` contains
  configuration items to write the activity report in a stream

The following items details each sections and the associated options, and give
an example.

.. topic:: Example of report.ini

   .. literalinclude:: /lapptrack/support/report.example.ini
      :language: ini


.. _lapptrack-userguide_report-ini-core-section:

Core Section
------------
The ``[core]`` section contains configuration items for the report processor.

====================  ==========================================================
``handlers``          (mandatory) is the list of handlers to publish the report.
                      Each handler has to have a corresponding section for its
                      own configuration.
``template``          (optional) is the full path name of the template file. The
                      `lapptrack-userguide_report-template` describes the format
                      of the template file. The default value is
                      ``report_template.html``.
====================  ==========================================================

.. topic:: Example of a ``[core]`` section

   .. literalinclude:: /lapptrack/support/report.example.ini
      :language: ini
      :lines: 14-16

.. _lapptrack-userguide_report-ini-attributes-section:

Attributes Section
------------------
The ``[attributes]`` section contains named keyword used in the template report
(see ``template`` item in the `lapptrack-userguide_report-ini-core-section`.

Theses attributes are used in the header and tail sections of the report (see
``Title``, ``BodyStart``, ``BodyEnd``, ``Tail`` sections in the
`lapptrack-userguide_report-template`). The :file:`report_template.html` doesn't
use any additional attribute, so this section is empty if you use the default
templates.

.. topic:: Example of a ``[attributes]`` section

   .. literalinclude:: /lapptrack/support/report.example.ini
      :language: ini
      :lines: 23-24

.. _lapptrack-userguide_report-ini-mailhandler-section:

Mail Handler Section
--------------------
The ``[mailhandler]`` section contains configuration items to send the activity
report in a mail.

====================  ==========================================================
``class``             (optional) indicates the handler’s class (as determined in
                      the report module). By default, the name of the section is
                      used as the class name.
``host``              (mandatory) is a string containing the full qualified name
                      of the SMTP server host, or a 2-tuple containing the full
                      qualified name of the SMTP server and the port number to
                      use.
``credentials``       (optional) is a 2-tuple containing the username and the
                      password to connect to the SMTP server.
``from_address``      (optional) is a string containing the mail addresses of
                      the sender. If not specified, the address is set to the
                      local host name. (see `smtplib.SMTP`)
``mail_sent``         (optional) is the full path name of the folder where a
                      copy of the mail will be written. An empty string does
                      nothing.
``pending_mail``      (optional) is the full path name of the folder where a
                      copy of the mail will be written until it is sent. It
                      avoid to lost mail if the mail server configuration is
                      erroneous or if the mail server doesn't answer. An empty
                      string does nothing.
``to_addresses``      (mandatory) is a string or a list containing the mail
                      addresses of the recipient.
``subject``           (optional) is a string containing the mail subject. An
                      empty string does nothing.
====================  ==========================================================

.. topic:: Example of a ``[mailhandler]`` section

   .. literalinclude:: /lapptrack/support/report.example.ini
      :language: ini
      :lines: 55-65

.. _lapptrack-userguide_report-ini-filehandler-section:

File Handler Section
--------------------
The ``[filehandler]`` section contains configuration items to write the activity
report in a file

====================  ==========================================================
``class``             (optional) indicates the handler’s class (as determined in
                      the report module). By default, the name of the section is
                      used as the class name.
``filename``          (mandatory) is a string containing the full path name of
                      the destination file.
``mode``              (optional) is a string specifying the mode in which the
                      file is opened. (see `open`)
====================  ==========================================================

.. topic:: Example of a ``[filehandler]`` section

   .. literalinclude:: /lapptrack/support/report.example.ini
      :language: ini
      :lines: 74-77

.. _lapptrack-userguide_report-ini-streamhandler-section:

Stream Handler Section
----------------------
The ``[streamhandler]`` section contains configuration items to write the
activity report in a stream.

====================  ==========================================================
``class``             (optional) indicates the handler’s class (as determined in
                      the report module). By default, the name of the section is
                      used as the class name.
``stream``            (optional) is a string specifying the :data:`standard
                      stream <sys.stdout>` on which report will be written.
                      By default, ``sys.stdout`` will be used.
====================  ==========================================================

.. topic:: Example of a ``[streamhandler]`` section

   .. literalinclude:: /lapptrack/support/report.example.ini
      :language: ini
      :lines: 85-87